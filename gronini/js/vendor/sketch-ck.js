var Sketch=function(){function e(e){e=t(e||{},v);var n="sketch-"+o++,i=document.createElement("canvas");switch(e.type){case a:try{l=i.getContext("webgl",e)}catch(f){}try{l=l||i.getContext("experimental-webgl",e)}catch(f){}if(!l)throw"WebGL not supported";break;case u:try{l=i.getContext("2d",e)}catch(f){}if(!l)throw"Canvas not supported";break;default:i=l=document.createElement("div")}return l.canvas=i,i.className="sketch",i.id=n,e.container.appendChild(i),t(self,m),t(l,e),t(l,g),r(),s(),d.push(l),l.autostart&&setTimeout(l.start,0),l}function t(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}function n(e){function t(e,t){return function(){e.call(t,arguments)}}var n={};for(var r in e)typeof e[r]=="function"?n[r]=t(e[r],e):n[r]=e[r];return n}function r(){function e(e){return w[e]||String.fromCharCode(e)}function t(e){l.mouse.ox=l.mouse.x,l.mouse.oy=l.mouse.y,l.mouse.x=e.x,l.mouse.y=e.y,l.mouse.dx=l.mouse.x-l.mouse.ox,l.mouse.dy=l.mouse.y-l.mouse.oy}function r(e){var t,r=n(e);r.original=e;for(var i=l.canvas,s=0,o=0;i;i=i.offsetParent)s+=i.offsetLeft,o+=i.offsetTop;if(r.touches&&!!r.touches.length)for(var u=r.touches.length-1,a;u>=0;u--)a=r.touches[u],a.x=a.pageX-s,a.y=a.pageY-o,t=S[u]||a,a.dx=a.x-t.x,a.dy=a.y-t.x,a.ox=t.x,a.oy=t.y,S[u]=n(a);else r.x=r.pageX-s,r.y=r.pageY-o,t=S.mouse||r,r.dx=r.x-t.x,r.dy=r.y-t.y,r.ox=t.x,r.oy=t.y,S.mouse=r;return r}function i(e){e.preventDefault(),e=r(e),l.touches=e.touches,t(l.touches[0]),l.touchstart&&l.touchstart(e),l.mousedown&&l.mousedown(e)}function o(e){e=r(e),l.touches=e.touches,t(l.touches[0]),l.touchmove&&l.touchmove(e),l.mousemove&&l.mousemove(e)}function u(e){e=r(e);if(!e.touches.length)S={};else for(var t in S)e.touches[t]||delete S[t];l.touchend&&l.touchend(e),l.mouseup&&l.mouseup(e)}function a(e){e=r(e),l.mouseover&&l.mouseover(e)}function f(e){e=r(e),l.dragging||(b(l.canvas,"mousemove",c),b(l.canvas,"mouseup",p),y(document,"mousemove",c),y(document,"mouseup",p),l.dragging=!0),l.touches=[e],l.touchstart&&l.touchstart(e),l.mousedown&&l.mousedown(e)}function c(e){e=r(e),t(e),l.touches=[e],l.touchmove&&l.touchmove(e),l.mousemove&&l.mousemove(e)}function h(e){e=r(e),l.mouseout&&l.mouseout(e)}function p(e){e=r(e),l.dragging&&(b(document,"mousemove",c),b(document,"mouseup",p),y(l.canvas,"mousemove",c),y(l.canvas,"mouseup",p),l.dragging=!1),delete S.mouse,l.touchend&&l.touchend(e),l.mouseup&&l.mouseup(e)}function d(e){e=r(e),l.click&&l.click(e)}function v(t){l.keys[e(t.keyCode)]=!0,l.keys[t.keyCode]=!0,l.keydown&&l.keydown(t)}function m(t){l.keys[e(t.keyCode)]=!1,l.keys[t.keyCode]=!1,l.keyup&&l.keyup(t)}var w={8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",27:"ESCAPE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"};for(var E in w)g.keys[w[E]]=!1;var S={};y(l.canvas,"touchstart",i),y(l.canvas,"touchmove",o),y(l.canvas,"touchend",u),y(l.canvas,"mouseover",a),y(l.canvas,"mousedown",f),y(l.canvas,"mousemove",c),y(l.canvas,"mouseout",h),y(l.canvas,"mouseup",p),y(l.canvas,"click",d),y(document,"keydown",v),y(document,"keyup",m),y(window,"resize",s)}function i(e){c||(l.dt=(e=e||Date.now())-l.now,l.millis+=l.dt,l.now=e,l.update&&l.update(l.dt),l.autoclear&&l.clear(),l.draw&&l.draw(l)),c=++c%l.interval,h=requestAnimationFrame(i)}function s(e){var t=l.type===f?l.style:l.canvas;l.fullscreen?(l.height=t.height=window.innerHeight,l.width=t.width=window.innerWidth):(t.height=l.height,t.width=l.width),l.resize&&l.resize()}var o=0,u="canvas",a="web-gl",f="dom",l,c=0,h=-1,p={},d=[],v={fullscreen:!0,autostart:!0,autoclear:!0,autopause:!0,container:document.body,interval:1,type:u},m={PI:Math.PI,TWO_PI:Math.PI*2,HALF_PI:Math.PI/2,QUARTER_PI:Math.PI/4,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,atan:Math.atan,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,random:function(e,t){return e&&typeof e.length=="number"&&!!e.length?e[Math.floor(Math.random()*e.length)]:(typeof t!="number"&&(t=e||1,e=0),e+Math.random()*(t-e))}},g={millis:0,now:NaN,dt:NaN,keys:{},mouse:{x:0,y:0,ox:0,oy:0,dx:0,dy:0},touches:[],initialized:!1,dragging:!1,running:!1,start:function(){if(l.running)return;l.setup&&!l.initialized&&(l.autopause&&(y(window,"focus",l.start),y(window,"blur",l.stop)),l.setup()),l.initialized=!0,l.running=!0,l.now=Date.now(),i()},stop:function(){cancelAnimationFrame(h),l.running=!1},toggle:function(){(l.running?l.stop:l.start)()},clear:function(){l.canvas&&(l.canvas.width=l.canvas.width)},destroy:function(){var e,t,n,r,i,s;d.splice(d.indexOf(l),1),l.stop();for(t in p){n=p[t];for(i=0,s=n.length;i<s;i++)e=n[i],b(e.el,t,e.fn);delete p[t]}l.container.removeChild(l.canvas);for(r in l)l.hasOwnProperty(r)&&delete l[r]}},y=function(){function e(e,t,n){p[t]||(p[t]=[]),p[t].push({el:e,fn:n})}return window.addEventListener?function(t,n,r){t.addEventListener(n,r,!1),e(t,n,r)}:window.attachEvent?function(t,n,r){t.attachEvent("on"+n,r),e(t,n,r)}:function(t,n,r){t["on"+n]=r,e(t,n,r)}}(),b=function(){function e(e,t,n){if(p[t]){var r;for(var i=p[t].length-1;i>=0;i--)r=p[t][i],r.el===e&&r.fn===n&&p[t].splice(i,1)}}if(window.removeEventListener)return function(t,n,r){t.removeEventListener(n,r,!1),e(t,n,r)};if(window.detachEvent)return function(t,n,r){t.detachEvent("on"+n,r),e(t,n,r)};el["on"+ev]=null,e(el,ev,fn)}();return{CANVAS:u,WEB_GL:a,DOM:f,instances:d,create:e}}();Date.now||(Date.now=function(){return+(new Date)}),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=Date.now(),r=Math.max(0,16-(n-e)),i=window.setTimeout(function(){t(n+r)},r);return e=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();